{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Chat(_ref){let{apiBase}=_ref;const[messages,setMessages]=useState([]);const[input,setInput]=useState('');const[loading,setLoading]=useState(false);const boxRef=useRef();useEffect(()=>{var _boxRef$current;(_boxRef$current=boxRef.current)===null||_boxRef$current===void 0?void 0:_boxRef$current.scrollTo({top:boxRef.current.scrollHeight});},[messages]);async function send(){if(!input.trim())return;const userMsg=input.trim();setMessages(m=>[...m,{role:'user',text:userMsg}]);setInput('');setLoading(true);try{const res=await axios.post(\"\".concat(apiBase,\"/api/chat\"),{userId:'web_user',message:userMsg});setMessages(m=>[...m,{role:'assistant',text:res.data.reply}]);}catch(err){setMessages(m=>[...m,{role:'assistant',text:'Error: unable to reach server'}]);}finally{setLoading(false);}}return/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Chat with SDMART AI\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"chatWindow\",ref:boxRef,children:[messages.map((m,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(m.role),children:/*#__PURE__*/_jsx(\"div\",{className:\"bubble\",children:m.text})},i)),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"assistant\",children:\"SDMART is typing...\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',marginTop:8},children:[/*#__PURE__*/_jsx(\"input\",{style:{flex:1,padding:8},value:input,onChange:e=>setInput(e.target.value),onKeyDown:e=>{if(e.key==='Enter')send();},placeholder:\"Ask about desktops, AIOs, custom builds...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:send,style:{marginLeft:8,padding:'8px 12px'},children:\"Send\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsx","_jsx","jsxs","_jsxs","Chat","_ref","apiBase","messages","setMessages","input","setInput","loading","setLoading","boxRef","_boxRef$current","current","scrollTo","top","scrollHeight","send","trim","userMsg","m","role","text","res","post","concat","userId","message","data","reply","err","className","children","ref","map","i","style","display","marginTop","flex","padding","value","onChange","e","target","onKeyDown","key","placeholder","onClick","marginLeft"],"sources":["C:/Users/gupta/Downloads/sdmart-upgrade1/frontend/src/components/Chat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\n\nexport default function Chat({ apiBase }){\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const boxRef = useRef();\n\n  useEffect(()=>{ boxRef.current?.scrollTo({ top: boxRef.current.scrollHeight }); }, [messages]);\n\n  async function send(){\n    if(!input.trim()) return;\n    const userMsg = input.trim();\n    setMessages(m => [...m, { role:'user', text: userMsg }]);\n    setInput('');\n    setLoading(true);\n    try{\n      const res = await axios.post(`${apiBase}/api/chat`, { userId: 'web_user', message: userMsg });\n      setMessages(m => [...m, { role:'assistant', text: res.data.reply }]);\n    }catch(err){\n      setMessages(m => [...m, { role:'assistant', text: 'Error: unable to reach server' }]);\n    }finally{ setLoading(false); }\n  }\n\n  return (\n    <div className=\"box\">\n      <h3>Chat with SDMART AI</h3>\n      <div className=\"chatWindow\" ref={boxRef}>\n        {messages.map((m,i)=>(\n          <div key={i} className={`message ${m.role}`}>\n            <div className=\"bubble\">{m.text}</div>\n          </div>\n        ))}\n        {loading && <div className=\"assistant\">SDMART is typing...</div>}\n      </div>\n\n      <div style={{display:'flex', marginTop:8}}>\n        <input style={{flex:1, padding:8}} value={input} onChange={e=>setInput(e.target.value)} onKeyDown={e=>{ if(e.key==='Enter') send(); }} placeholder=\"Ask about desktops, AIOs, custom builds...\" />\n        <button onClick={send} style={{marginLeft:8, padding:'8px 12px'}}>Send</button>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}